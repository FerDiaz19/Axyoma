# üìã DOCUMENTACI√ìN T√âCNICA COMPLETA - SISTEMA AXYOMA

## üìä ESTADO ACTUAL DEL PROYECTO

### ‚úÖ IMPLEMENTADO (100% FUNCIONAL)

#### ÔøΩ Sistema de Suscripciones y Pagos (COMPLETAMENTE FUNCIONAL)
- **üìã Gesti√≥n de Planes de Suscripci√≥n**
  - Creaci√≥n, edici√≥n y activaci√≥n/desactivaci√≥n de planes
  - Configuraci√≥n de l√≠mites de empleados y plantas
  - Definici√≥n de precios y caracter√≠sticas
- **üí≥ Gesti√≥n de Suscripciones de Empresas**
  - Asignaci√≥n de planes a empresas
  - Renovaci√≥n autom√°tica y manual de suscripciones
  - Control de fechas de vencimiento y alertas
  - Estados: activa, vencida, suspendida, cancelada
- **üí∞ Registro de Pagos**
  - M√∫ltiples m√©todos de pago (tarjeta, transferencia, efectivo)
  - Historial completo de transacciones
  - Referencias y estados de pago
- **üö® Alertas y Notificaciones**
  - Suscripciones pr√≥ximas a vencer
  - Estados de pagos pendientes
  - L√≠mites de plan alcanzados

#### ÔøΩüîê Sistema de Autenticaci√≥n
- Login seguro con niveles de usuario
- Tokens de autenticaci√≥n JWT
- Control de acceso por roles
- Soporte para empresas suspendidas con funcionalidades limitadas

#### üëë Panel SuperAdmin (COMPLETAMENTE FUNCIONAL)
- **üìä Dashboard con estad√≠sticas en tiempo real**
- **üè¢ Gesti√≥n completa de Empresas** (ver, filtrar, suspender, eliminar, ‚úèÔ∏è editar)
- **üë• Gesti√≥n completa de Usuarios** (ver, filtrar, suspender, eliminar, ‚úèÔ∏è editar)
- **üè≠ Gesti√≥n completa de Plantas** (ver, filtrar, suspender, eliminar, ‚úèÔ∏è editar)
- **üè¢ Gesti√≥n completa de Departamentos** (ver, filtrar, suspender, eliminar, ‚úèÔ∏è editar)
- **üíº Gesti√≥n completa de Puestos** (ver, filtrar, suspender, eliminar, ‚úèÔ∏è editar)
- **üë§ Gesti√≥n completa de Empleados** (ver, filtrar, suspender, eliminar, ‚úèÔ∏è editar)
- **üí≥ Gesti√≥n completa de Suscripciones** (ver, filtrar, renovar, crear nuevas)
- **üìã Gesti√≥n completa de Planes** (ver, crear, editar, activar/desactivar)

#### üè¢ Panel Admin Empresa (FUNCIONAL)
- Dashboard con estad√≠sticas de la empresa
- Gesti√≥n de plantas asignadas
- Gesti√≥n de departamentos y puestos
- Gesti√≥n de empleados
- Soporte para empresas suspendidas con advertencias

#### üè≠ Panel Admin Planta (FUNCIONAL)
- Dashboard espec√≠fico de la planta
- Gesti√≥n de departamentos de la planta
- Gesti√≥n de empleados de la planta

---

## üóÑÔ∏è ESQUEMA DE BASE DE DATOS

### TABLAS IMPLEMENTADAS ‚úÖ

#### 1. USUARIOS
- **Implementado en**: `apps.users.models.PerfilUsuario` + Django User
- **Diferencias**: Se usa el modelo User de Django para autenticaci√≥n y PerfilUsuario para datos adicionales
- **Datos base**:
  - SuperAdmin: `ed-rubio@axyoma.com` / `1234`
  - Admin Empresa: `juan.perez@codewave.com` / `1234`
  - Admin Planta 1: `maria.gomez@codewave.com` / `1234`
  - Admin Planta 2: `carlos.ruiz@codewave.com` / `1234`

#### 2. EMPRESAS
- **Implementado en**: `apps.users.models.Empresa`
- **Datos base**: "Soluciones Industriales MX" (RFC: SIMX920314ABC)

#### 3. PLANTAS
- **Implementado en**: `apps.users.models.Planta`
- **Datos base**: Oficina Central Tijuana, Oficina Monterrey

#### 4. ADMIN_PLANTAS
- **Implementado en**: `apps.users.models.AdminPlanta`
- **Relaciones**: Maria Gomez ‚Üí Tijuana, Carlos Ruiz ‚Üí Monterrey

#### 5. DEPARTAMENTOS
- **Implementado en**: `apps.users.models.Departamento`
- **Datos base**: RRHH, Desarrollo, Operaciones, Calidad (por planta)

#### 6. PUESTOS
- **Implementado en**: `apps.users.models.Puesto`
- **Datos base**: Gerentes, Analistas, Desarrolladores, etc. (por departamento)

#### 7. EMPLEADOS
- **Implementado en**: `apps.users.models.Empleado`
- **Datos base**: 8 empleados de ejemplo distribuidos en plantas/departamentos

#### 8. PLANES_SUSCRIPCION ‚úÖ
- **Implementado en**: `apps.subscriptions.models.PlanSuscripcion`
- **Funcionalidades**: Creaci√≥n, edici√≥n, activaci√≥n/desactivaci√≥n de planes
- **Configuraci√≥n**: L√≠mites de empleados/plantas, precios, caracter√≠sticas

#### 9. SUSCRIPCION_EMPRESA ‚úÖ
- **Implementado en**: `apps.subscriptions.models.SuscripcionEmpresa`
- **Funcionalidades**: Asignaci√≥n de planes, renovaciones, control de vencimientos
- **Estados**: activa, vencida, suspendida, cancelada

#### 10. PAGOS ‚úÖ
- **Implementado en**: `apps.subscriptions.models.Pago`
- **Funcionalidades**: Registro de transacciones, m√∫ltiples m√©todos de pago
- **Seguimiento**: Estados de pago, referencias, historial completo

### TABLAS PENDIENTES DE IMPLEMENTAR ‚è≥

#### 11. EVALUACIONES
```sql
CREATE TABLE PAGOS (
    id_pago SERIAL PRIMARY KEY,
    id_suscripcion INTEGER REFERENCES SUSCRIPCION_EMPRESA(id_suscripcion),
    monto DECIMAL(10,2) NOT NULL,
    fecha_pago DATE NOT NULL,
    metodo_pago VARCHAR(50),
    status_pago VARCHAR(20) DEFAULT 'pendiente'
);
```

#### 11. TIPOS_EVALUACION
```sql
CREATE TABLE TIPOS_EVALUACION (
    id_tipo SERIAL PRIMARY KEY,
    nombre VARCHAR(100) NOT NULL,
    descripcion TEXT,
    status BOOLEAN DEFAULT TRUE
);
```

#### 12. EVALUACIONES
```sql
CREATE TABLE EVALUACIONES (
    id_evaluacion SERIAL PRIMARY KEY,
    id_tipo INTEGER REFERENCES TIPOS_EVALUACION(id_tipo),
    titulo VARCHAR(200) NOT NULL,
    descripcion TEXT,
    id_empresa INTEGER REFERENCES EMPRESAS(id_empresa),
    fecha_creacion TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    status BOOLEAN DEFAULT TRUE
);
```

#### 13-18. SISTEMA DE EVALUACIONES COMPLETO
- SECCIONES_EVAL
- PREGUNTAS  
- CONJUNTOS_OPCIONES
- OPCIONES_CONJUNTO
- SECCION_PREGUNTAS
- ASIGNACIONES
- RESPUESTAS
- RESULTADOS_EVAL

---

## üîß FUNCIONALIDADES T√âCNICAS IMPLEMENTADAS

### ‚úèÔ∏è Sistema de Edici√≥n Completa
- **Modal de edici√≥n universal** para todas las entidades
- **Validaci√≥n de formularios** con mensajes de error
- **Campos espec√≠ficos** por entidad:
  - **Empresas**: nombre, RFC, tel√©fono, correo, direcci√≥n, status
  - **Usuarios**: username, email, nombre completo, nivel de usuario, estado activo
  - **Plantas**: nombre, direcci√≥n, tel√©fono, status
  - **Departamentos**: nombre, descripci√≥n, status
  - **Puestos**: nombre, descripci√≥n, status
  - **Empleados**: nombre, apellidos, tel√©fono, correo, fecha ingreso, status

### üé® Mejoras UI/UX
- **Tabla de usuarios mejorada** con botones de acciones m√°s visibles
- **Columna de acciones expandida** (250px) para mejor visualizaci√≥n
- **Botones con dise√±o moderno** y efectos hover
- **Responsive design** mejorado para todas las tablas
- **Filtros avanzados** para todas las entidades
- **Estad√≠sticas en tiempo real** en dashboards

### üîß Backend Robusto
- **Endpoints PUT** para edici√≥n de todas las entidades
- **Validaci√≥n de datos** en servidor
- **Manejo de errores** robusto
- **Logging completo** de operaciones
- **Autenticaci√≥n JWT** segura
- **Control de permisos** por nivel de usuario

### ÔøΩ APIs de Suscripciones y Pagos (IMPLEMENTADAS)

#### Endpoints de Planes de Suscripci√≥n
- **GET** `/api/suscripciones/planes/` - Listar todos los planes
- **POST** `/api/suscripciones/planes/` - Crear nuevo plan
- **PUT** `/api/suscripciones/planes/{id}/` - Editar plan existente
- **DELETE** `/api/suscripciones/planes/{id}/` - Eliminar plan

#### Endpoints de Suscripciones de Empresas
- **GET** `/api/suscripciones/suscripciones/` - Listar todas las suscripciones
- **POST** `/api/suscripciones/suscripciones/` - Crear nueva suscripci√≥n
- **PUT** `/api/suscripciones/suscripciones/{id}/` - Editar suscripci√≥n
- **POST** `/api/suscripciones/suscripciones/{id}/renovar/` - Renovar suscripci√≥n

#### Endpoints de Pagos
- **GET** `/api/suscripciones/pagos/` - Listar todos los pagos
- **POST** `/api/suscripciones/pagos/` - Registrar nuevo pago

#### Caracter√≠sticas T√©cnicas
- **C√°lculo autom√°tico** de fechas de vencimiento
- **Validaci√≥n de l√≠mites** de plan vs empresa
- **Estados autom√°ticos** de suscripciones (activa/vencida/suspendida)
- **Integraci√≥n con sistema** de empresas y usuarios
- **Campos calculados** como d√≠as_restantes y esta_por_vencer

### ÔøΩüîç Correcciones T√©cnicas Aplicadas
1. **API Routes Fix**: Corregido problema de rutas dobles (/api/api/...)
2. **Endpoints corregidos**: Campos de modelos Django alineados
3. **Login para empresas suspendidas**: Permitido con funcionalidades limitadas
4. **Campo salario eliminado**: Del modal de edici√≥n de empleados
5. **Cascada de suspensiones**: Implementada correctamente

---

## üöÄ SETUP Y EJECUCI√ìN

### Scripts Esenciales
- **`SETUP_SISTEMA_COMPLETO.bat`** - Setup inicial √∫nico y completo
- **`start-backend.bat`** - Inicia el servidor Django
- **`start-frontend.bat`** - Inicia el servidor React
- **`Backend/setup_sistema_completo.py`** - Script Python de configuraci√≥n completa

### Proceso de Setup
1. Ejecutar `SETUP_SISTEMA_COMPLETO.bat`
2. Ejecutar `start-backend.bat`
3. Ejecutar `start-frontend.bat`
4. Sistema listo en 3 pasos

### Credenciales por Defecto
- **SuperAdmin**: `ed-rubio@axyoma.com` / `1234`
- **Admin Empresa**: `juan.perez@codewave.com` / `1234`
- **Admin Planta 1**: `maria.gomez@codewave.com` / `1234`
- **Admin Planta 2**: `carlos.ruiz@codewave.com` / `1234`

---

## üìà EVALUACI√ìN DE PROGRESO BASADA EN SRS

### üéØ **PROGRESO TOTAL: 57.5%**

**An√°lisis basado en IEEE 830 - Especificaci√≥n de Requerimientos de Software**

#### ‚úÖ REQUERIMIENTOS FUNCIONALES IMPLEMENTADOS (58.57%)
- **RF-002**: Registro y gesti√≥n de empresas ‚úÖ 100%
- **RF-004**: Gesti√≥n de plantas ‚úÖ 100%
- **RF-005**: Gesti√≥n de usuarios ‚úÖ 100%
- **RF-006**: Gesti√≥n de estructura organizacional ‚úÖ 100%
- **RF-013**: Visualizaci√≥n y an√°lisis de resultados üîÑ 60%

#### ‚ùå REQUERIMIENTOS FUNCIONALES PENDIENTES (41.43%)
- **RF-001**: Gesti√≥n de suscripciones ‚ùå 0%
- **RF-003**: Gesti√≥n de plan de suscripci√≥n ‚ùå 0%
- **RF-007**: Gesti√≥n de evaluaciones ‚ùå 0%
- **RF-008**: Creaci√≥n de evaluaciones internas ‚ùå 0%
- **RF-009**: Asignaci√≥n y distribuci√≥n de encuestas ‚ùå 0%
- **RF-010**: Generaci√≥n de tokens para acceso ‚ùå 0%
- **RF-011**: Acceso a evaluaciones ‚ùå 0%
- **RF-012**: Registro de respuestas ‚ùå 0%
- **RF-014**: Respaldo y restauraci√≥n de datos ‚ùå 0%

#### ‚úÖ REQUERIMIENTOS NO FUNCIONALES IMPLEMENTADOS (54.29%)
- **RNF-002**: Seguridad ‚úÖ 100%
- **RNF-005**: Mantenibilidad ‚úÖ 100%
- **RNF-006**: Portabilidad üîÑ 80%
- **RNF-007**: Usabilidad ‚úÖ 100%

#### ‚ùå REQUERIMIENTOS NO FUNCIONALES PENDIENTES (45.71%)
- **RNF-001**: Rendimiento ‚ùå 0%
- **RNF-003**: Fiabilidad ‚ùå 0%
- **RNF-004**: Disponibilidad ‚ùå 0%

### üöÄ **COMPONENTES POR ESTADO**
- **Gesti√≥n organizacional**: 95% ‚úÖ
- **Autenticaci√≥n y seguridad**: 100% ‚úÖ  
- **UI/UX moderno**: 90% ‚úÖ
- **Sistema de evaluaciones**: 0% ‚ùå **(CR√çTICO)**
- **Sistema de suscripciones**: 0% ‚ùå **(CR√çTICO)**
- **Flujo empleado-token-certificado**: 0% ‚ùå **(CR√çTICO)**

---

## üéØ PR√ìXIMOS PASOS RECOMENDADOS

### Prioridad Alta
1. **Sistema de Suscripciones**: Implementar planes y control de l√≠mites
2. **Sistema de Pagos**: Integraci√≥n con pasarelas de pago
3. **Evaluaciones B√°sicas**: Implementar tipos de evaluaci√≥n y preguntas

### Prioridad Media
4. **Reportes**: Dashboard de reportes y estad√≠sticas avanzadas
5. **Notificaciones**: Sistema de alertas y notificaciones
6. **API Mobile**: Endpoints optimizados para app m√≥vil

### Prioridad Baja
7. **Optimizaciones**: Cach√©, rendimiento, SEO
8. **Backups**: Sistema automatizado de respaldos
9. **Monitoreo**: Logs avanzados y m√©tricas de uso

---

*√öltima actualizaci√≥n: Enero 2025*  
*Sistema listo para producci√≥n en funcionalidades base*  
*Preparado para futuras expansiones*
